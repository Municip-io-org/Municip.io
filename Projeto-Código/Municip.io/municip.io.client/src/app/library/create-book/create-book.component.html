<app-header-loggedin></app-header-loggedin>
<app-smaller-banner [title]="'Criar Livro'" [image]="municipalityImage"
                    class="font-inter" />


<div class="flex flex-col bg-municip-blank pb-[4rem] text-municip-normal-black pt-6 px-32 space-y-20">



  <form [formGroup]="bookForm" (ngSubmit)="onSubmit()" class="pt-[1rem] relative flex flex-col gap-y-3 pb-[5rem]">

    <section class="flex flex-wrap gap-y-6 text-left justify-around mb-4 ">
      <div class="w-full lg:w-5/12 mb-4 h-32">
        <app-input-title class="text-[1.8rem]">ISBN</app-input-title>

        <input required type="number" id="iSBN" formControlName="iSBN" name="iSBN"
               class="input font-poppins w-full h-12 lg:h-14" />


        <div class="absolute text-red-500 font-bold py-2" *ngIf="iSBN?.touched && iSBN?.invalid">
          <div *ngIf="iSBN?.errors?.['required']">ISBN obrigatório</div>
        </div>
      </div>


      <div class="w-full lg:w-5/12 mb-4 h-32">
        <app-input-title class="text-[1.8rem]">Editora</app-input-title>

        <input required type="text" id="publisher"
               formControlName="publisher" name="publisher"
               class="input font-poppins  w-full h-12 lg:h-14" />


        <div class="absolute text-red-500 font-bold py-2" *ngIf="publisher?.touched && publisher?.invalid ">
          <div *ngIf="publisher?.errors?.['required'] ">Edição obrigatória</div>
        </div>
      </div>
    </section>

    <section class="flex flex-wrap gap-y-6 text-left justify-around mb-4 ">
      <div class="w-full lg:w-5/12 mb-4 h-32">
        <app-input-title class="text-[1.8rem]">Título</app-input-title>

        <input required type="text" id="title" formControlName="title" name="title"
               class="input font-poppins  w-full h-12 lg:h-14 " />


        <div class="absolute text-red-500 font-bold py-2" *ngIf="title?.touched && title?.invalid">
          <div *ngIf="title?.errors?.['required']">Título obrigatório</div>
        </div>
      </div>


      <div class="w-full lg:w-5/12 mb-4 h-32">
        <app-input-title class="text-[1.8rem]">Edição</app-input-title>

        <input required type="text" id="edition"
               formControlName="edition" name="edition"
               class="input font-poppins  w-full h-12 lg:h-14" />


        <div class="absolute text-red-500 font-bold py-2" *ngIf="edition?.touched && edition?.invalid ">
          <div *ngIf="edition?.errors?.['required'] ">Edição obrigatória</div>
        </div>
      </div>
    </section>


    <section class="flex flex-wrap gap-y-6 text-left justify-around mb-4 ">
      <div class="w-full lg:w-5/12 mb-4 h-32">
        <app-input-title class="text-[1.8rem]">Autores</app-input-title>

        <input required type="text" id="author" formControlName="author" name="author"
               class="input font-poppins w-full h-12 lg:h-14 " />


        <div class="absolute text-red-500 font-bold py-2" *ngIf="author?.touched && author?.invalid">
          <div *ngIf="author?.errors?.['required']">Autor obrigatório</div>
        </div>
      </div>


      <div class="w-full lg:w-5/12 mb-4 h-32">
        <app-input-title class="text-[1.8rem]">Nº de exemplares</app-input-title>

        <input required type="date" id="publicationDate"
               formControlName="publicationDate" name="publicationDate"
               class="input font-poppins w-full h-12 lg:h-14" />


        <div class="absolute text-red-500 font-bold py-2" *ngIf="publicationDate?.touched && publicationDate?.invalid ">
          <div *ngIf="publicationDate?.errors?.['required'] ">Data de publicação obrigatória</div>
        </div>
      </div>
    </section>


    <section class="flex flex-wrap gap-y-6 text-left justify-around mb-4">

      <div class="w-full lg:w-5/12 mb-4 h-32">
        <app-input-title class="text-[1.8rem]">Categorias</app-input-title>

        <input required type="text" id="genre" formControlName="genre" name="genre"
               class="input font-poppins w-full h-12 lg:h-14 " />


        <div class="absolute text-red-500 font-bold py-2" *ngIf="genre?.touched && genre?.invalid">
          <div *ngIf="genre?.errors?.['required']">Categoria obrigatória</div>
        </div>
      </div>

      <div class="flex flex-col  text-left w-full lg:w-5/12 mb-4 h-[16rem]">
        <app-input-title class="text-[1.8rem]">Capa do livro</app-input-title>
        <div class="h-20 table w-full bg-[#F5F5F7] rounded-[0.375rem] border-2 border-dotted border-[#bbbabc]" (dragover)="onDragOver($event)"
             (drop)="onDrop($event)" (click)="coverImagePicker.click()">

          <div class="table-cell align-middle">
            <div class="text-center">
              <input type="file" #coverImagePicker (change)="onCoverImagePicked($event)" accept="image/*" capture class="hidden">

              <label for="file" class="flex justify-center items-center p-5 hover:cursor-pointer">Seleciona uma imagem ou arrasta-a para aqui!</label>

              <div *ngIf="coverImage" class="flex items-center justify-center pb-2">
                <img [src]="coverImageUrl" alt="Imagem carregada" class="w-[10rem] h-[10rem] object-cover ">
              </div>

            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="flex flex-wrap gap-y-6 text-left justify-around  ">
      <div class="w-full lg:w-5/12 mb-4 h-32">
        <app-input-title class="text-[1.8rem]">Idioma</app-input-title>

        <input required type="text" id="language" formControlName="language" name="language"
               class="input font-poppins  w-full h-12 lg:h-14 " />


        <div class="absolute text-red-500 font-bold py-2" *ngIf="language?.touched && language?.invalid">
          <div *ngIf="language?.errors?.['required']">Idioma obrigatório</div>
        </div>
      </div>


      <div class="w-full lg:w-5/12 mb-4 h-32">
        <app-input-title class="text-[1.8rem]">Nº de exemplares</app-input-title>

        <input required type="number" id="copies"
               formControlName="copies" name="copies"
               class="input font-poppins  w-full h-12 lg:h-14" />


        <div class="absolute text-red-500 font-bold py-2" *ngIf="copies?.touched && copies?.invalid ">
          <div *ngIf="copies?.errors?.['required'] ">Contacto Obrigatório</div>
          <div *ngIf="copies?.errors?.['pattern'] ">Contacto Inválido</div>
        </div>
      </div>


    </section>

    <div class="flex flex-col text-left w-full mt-6 mb-4 relative">
      <app-input-title class="text-[1.8rem]">Sinopse</app-input-title>
      <ngx-editor [editor]="editor" formControlName="sinopsis" placeholder="Introduza a sinopse do livro">
        <div class="bg-gray-100 border border-gray-300">
          <ngx-editor-menu [editor]="editor" [toolbar]="toolbar"></ngx-editor-menu>
        </div>
      </ngx-editor>
      <div class="text-red-500 font-bold py-2" *ngIf="sinopsis?.touched && sinopsis?.invalid ">
        <div *ngIf="sinopsis?.errors?.['required'] ">Sinopse Obrigatório</div>
      </div>
    </div>

    <button type="submit" [disabled]="!bookForm.valid || !coverImageUrl"
            class="absolute -bottom-[0rem] right-[2rem] h-auto w-[15rem] flex justify-center
              items-center text-municip-blank bg-gradient-to-tl from-municip-light-blue
              to-municip-blue border-0 py-4 hover:cursor-pointer focus:outline-none hover:bg-indigo-600
              rounded text-lg transition duration-700 ease-in-out disabled:cursor-not-allowed">
      Criar Livro
      <img alt="arrow" src="/assets/images/arrows/right-arrow.png" class="size-3.5 ml-1" />
    </button>
  </form>



</div>


<app-footer />
